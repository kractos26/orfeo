<code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#FF8000">// $Id: bar_csimex3.php,v 1.3 2002/08/31 20:03:46 aditus Exp $<br />// Horiontal bar graph with image maps<br /></font><font color="#007700">include (</font><font color="#DD0000">"../jpgraph.php"</font><font color="#007700">);<br />include (</font><font color="#DD0000">"../jpgraph_bar.php"</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$data1y</font><font color="#007700">=array(</font><font color="#0000BB">5</font><font color="#007700">,</font><font color="#0000BB">8</font><font color="#007700">,</font><font color="#0000BB">19</font><font color="#007700">,</font><font color="#0000BB">3</font><font color="#007700">,</font><font color="#0000BB">10</font><font color="#007700">,</font><font color="#0000BB">5</font><font color="#007700">);<br /></font><font color="#0000BB">$data2y</font><font color="#007700">=array(</font><font color="#0000BB">12</font><font color="#007700">,</font><font color="#0000BB">2</font><font color="#007700">,</font><font color="#0000BB">12</font><font color="#007700">,</font><font color="#0000BB">7</font><font color="#007700">,</font><font color="#0000BB">14</font><font color="#007700">,</font><font color="#0000BB">4</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// Setup the basic parameters for the graph<br /></font><font color="#0000BB">$graph </font><font color="#007700">= new </font><font color="#0000BB">Graph</font><font color="#007700">(</font><font color="#0000BB">400</font><font color="#007700">,</font><font color="#0000BB">700</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">SetAngle</font><font color="#007700">(</font><font color="#0000BB">90</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">SetScale</font><font color="#007700">(</font><font color="#DD0000">"textlin"</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// The negative margins are necessary since we<br />// have rotated the image 90 degress and shifted the <br />// meaning of width, and height. This means that the <br />// left and right margins now becomes top and bottom<br />// calculated with the image width and not the height.<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">img</font><font color="#007700">-&gt;</font><font color="#0000BB">SetMargin</font><font color="#007700">(-</font><font color="#0000BB">80</font><font color="#007700">,-</font><font color="#0000BB">80</font><font color="#007700">,</font><font color="#0000BB">210</font><font color="#007700">,</font><font color="#0000BB">210</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">SetMarginColor</font><font color="#007700">(</font><font color="#DD0000">'white'</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// Setup title for graph<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">title</font><font color="#007700">-&gt;</font><font color="#0000BB">Set</font><font color="#007700">(</font><font color="#DD0000">'Horizontal bar graph'</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">title</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFont</font><font color="#007700">(</font><font color="#0000BB">FF_FONT2</font><font color="#007700">,</font><font color="#0000BB">FS_BOLD</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">subtitle</font><font color="#007700">-&gt;</font><font color="#0000BB">Set</font><font color="#007700">(</font><font color="#DD0000">"With image map\nNote: The URL just points back to this image"</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// Setup X-axis.<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">xaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">SetTitle</font><font color="#007700">(</font><font color="#DD0000">"X-title"</font><font color="#007700">,</font><font color="#DD0000">'center'</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">xaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">title</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFont</font><font color="#007700">(</font><font color="#0000BB">FF_FONT1</font><font color="#007700">,</font><font color="#0000BB">FS_BOLD</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">xaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">title</font><font color="#007700">-&gt;</font><font color="#0000BB">SetAngle</font><font color="#007700">(</font><font color="#0000BB">90</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">xaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">SetTitleMargin</font><font color="#007700">(</font><font color="#0000BB">30</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">xaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">SetLabelMargin</font><font color="#007700">(</font><font color="#0000BB">15</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">xaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">SetLabelAlign</font><font color="#007700">(</font><font color="#DD0000">'right'</font><font color="#007700">,</font><font color="#DD0000">'center'</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// Setup Y-axis<br /><br />// First we want it at the bottom, i.e. the 'max' value of the<br />// x-axis<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">yaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">SetPos</font><font color="#007700">(</font><font color="#DD0000">'max'</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// Arrange the title<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">yaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">SetTitle</font><font color="#007700">(</font><font color="#DD0000">"Turnaround (mkr)"</font><font color="#007700">,</font><font color="#DD0000">'center'</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">yaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">SetTitleSide</font><font color="#007700">(</font><font color="#0000BB">SIDE_RIGHT</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">yaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">title</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFont</font><font color="#007700">(</font><font color="#0000BB">FF_FONT2</font><font color="#007700">,</font><font color="#0000BB">FS_BOLD</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">yaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">title</font><font color="#007700">-&gt;</font><font color="#0000BB">SetAngle</font><font color="#007700">(</font><font color="#0000BB">0</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">yaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">title</font><font color="#007700">-&gt;</font><font color="#0000BB">Align</font><font color="#007700">(</font><font color="#DD0000">'center'</font><font color="#007700">,</font><font color="#DD0000">'top'</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">yaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">SetTitleMargin</font><font color="#007700">(</font><font color="#0000BB">30</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// Arrange the labels<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">yaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">SetLabelSide</font><font color="#007700">(</font><font color="#0000BB">SIDE_RIGHT</font><font color="#007700">);<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">yaxis</font><font color="#007700">-&gt;</font><font color="#0000BB">SetLabelAlign</font><font color="#007700">(</font><font color="#DD0000">'center'</font><font color="#007700">,</font><font color="#DD0000">'top'</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// Create the bar plots with image maps<br /></font><font color="#0000BB">$b1plot </font><font color="#007700">= new </font><font color="#0000BB">BarPlot</font><font color="#007700">(</font><font color="#0000BB">$data1y</font><font color="#007700">);<br /></font><font color="#0000BB">$b1plot</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFillColor</font><font color="#007700">(</font><font color="#DD0000">"orange"</font><font color="#007700">);<br /></font><font color="#0000BB">$targ</font><font color="#007700">=array(</font><font color="#DD0000">"bar_clsmex2.php#1"</font><font color="#007700">,</font><font color="#DD0000">"bar_clsmex2.php#2"</font><font color="#007700">,</font><font color="#DD0000">"bar_clsmex2.php#3"</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">"bar_clsmex2.php#4"</font><font color="#007700">,</font><font color="#DD0000">"bar_clsmex2.php#5"</font><font color="#007700">,</font><font color="#DD0000">"bar_clsmex2.php#6"</font><font color="#007700">);<br /></font><font color="#0000BB">$alts</font><font color="#007700">=array(</font><font color="#DD0000">"val=%d"</font><font color="#007700">,</font><font color="#DD0000">"val=%d"</font><font color="#007700">,</font><font color="#DD0000">"val=%d"</font><font color="#007700">,</font><font color="#DD0000">"val=%d"</font><font color="#007700">,</font><font color="#DD0000">"val=%d"</font><font color="#007700">,</font><font color="#DD0000">"val=%d"</font><font color="#007700">);<br /></font><font color="#0000BB">$b1plot</font><font color="#007700">-&gt;</font><font color="#0000BB">SetCSIMTargets</font><font color="#007700">(</font><font color="#0000BB">$targ</font><font color="#007700">,</font><font color="#0000BB">$alts</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$b2plot </font><font color="#007700">= new </font><font color="#0000BB">BarPlot</font><font color="#007700">(</font><font color="#0000BB">$data2y</font><font color="#007700">);<br /></font><font color="#0000BB">$b2plot</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFillColor</font><font color="#007700">(</font><font color="#DD0000">"blue"</font><font color="#007700">);<br /></font><font color="#0000BB">$targ</font><font color="#007700">=array(</font><font color="#DD0000">"bar_clsmex2.php#7"</font><font color="#007700">,</font><font color="#DD0000">"bar_clsmex2.php#8"</font><font color="#007700">,</font><font color="#DD0000">"bar_clsmex2.php#9"</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">"bar_clsmex2.php#10"</font><font color="#007700">,</font><font color="#DD0000">"bar_clsmex2.php#11"</font><font color="#007700">,</font><font color="#DD0000">"bar_clsmex2.php#12"</font><font color="#007700">);<br /></font><font color="#0000BB">$alts</font><font color="#007700">=array(</font><font color="#DD0000">"val=%d"</font><font color="#007700">,</font><font color="#DD0000">"val=%d"</font><font color="#007700">,</font><font color="#DD0000">"val=%d"</font><font color="#007700">,</font><font color="#DD0000">"val=%d"</font><font color="#007700">,</font><font color="#DD0000">"val=%d"</font><font color="#007700">,</font><font color="#DD0000">"val=%d"</font><font color="#007700">);<br /></font><font color="#0000BB">$b2plot</font><font color="#007700">-&gt;</font><font color="#0000BB">SetCSIMTargets</font><font color="#007700">(</font><font color="#0000BB">$targ</font><font color="#007700">,</font><font color="#0000BB">$alts</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// Create the accumulated bar plot<br /></font><font color="#0000BB">$abplot </font><font color="#007700">= new </font><font color="#0000BB">AccBarPlot</font><font color="#007700">(array(</font><font color="#0000BB">$b1plot</font><font color="#007700">,</font><font color="#0000BB">$b2plot</font><font color="#007700">));<br /></font><font color="#0000BB">$abplot</font><font color="#007700">-&gt;</font><font color="#0000BB">SetShadow</font><font color="#007700">();<br /><br /></font><font color="#FF8000">// We want to display the value of each bar at the top<br /></font><font color="#0000BB">$abplot</font><font color="#007700">-&gt;</font><font color="#0000BB">value</font><font color="#007700">-&gt;</font><font color="#0000BB">Show</font><font color="#007700">();<br /></font><font color="#0000BB">$abplot</font><font color="#007700">-&gt;</font><font color="#0000BB">value</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFont</font><font color="#007700">(</font><font color="#0000BB">FF_FONT1</font><font color="#007700">,</font><font color="#0000BB">FS_NORMAL</font><font color="#007700">);<br /></font><font color="#0000BB">$abplot</font><font color="#007700">-&gt;</font><font color="#0000BB">value</font><font color="#007700">-&gt;</font><font color="#0000BB">SetAlign</font><font color="#007700">(</font><font color="#DD0000">'left'</font><font color="#007700">,</font><font color="#DD0000">'center'</font><font color="#007700">);<br /></font><font color="#0000BB">$abplot</font><font color="#007700">-&gt;</font><font color="#0000BB">value</font><font color="#007700">-&gt;</font><font color="#0000BB">SetColor</font><font color="#007700">(</font><font color="#DD0000">"black"</font><font color="#007700">,</font><font color="#DD0000">"darkred"</font><font color="#007700">);<br /></font><font color="#0000BB">$abplot</font><font color="#007700">-&gt;</font><font color="#0000BB">value</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFormat</font><font color="#007700">(</font><font color="#DD0000">'%.1f mkr'</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// ...and add it to the graph<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">Add</font><font color="#007700">(</font><font color="#0000BB">$abplot</font><font color="#007700">);<br /><br /></font><font color="#FF8000">// Send back the HTML page which will call this script again<br />// to retrieve the image.<br /></font><font color="#0000BB">$graph</font><font color="#007700">-&gt;</font><font color="#0000BB">StrokeCSIM</font><font color="#007700">(</font><font color="#DD0000">'bar_csimex3.php'</font><font color="#007700">,</font><font color="#DD0000">'bar_csimex3'</font><font color="#007700">);<br /><br /></font><font color="#0000BB">?&gt;<br /></font>
</font>
</code>